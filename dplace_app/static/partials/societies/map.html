<div class="row">
                <h4 ng-show="variables.length > 0">Choose a variable:</h4>
                <select 
                    ng-model="results.chosenVariable"
                    class="form-control"
                    ng-options="variable.name for variable in variables"
                    ng-init="results.chosenVariable=variables[0]"
                    ng-change="changeMap(results.chosenVariable)"
                    ng-show="variables.length > 0"
                 >
                 </select>
             </div>
            <dplace-map results="results" map-div-id="result-map" visible="visible" query="query" chosen="results.chosenVariable"></dplace-map>
            <table id="mapLegend" style="position:absolute; margin-top:-270px; margin-left:750px; margin-right:10px;">
                <tr class="download-links">
                </tr>
                <tr ng-show="results.chosenVariable.data_type !== 'CONTINUOUS'" ng-repeat="code in results.code_ids[results.chosenVariable.id]">
                    <td>
                        <svg height="20" width="20">
                            <circle
                                    cx="10"
                                    cy="10"
                                    r="4.5"
                                    fill="{{code.code|colorNode:results.code_ids[results.chosenVariable.id]}}"
                                    stroke="#000"
                                    stroke-width="0.5"
                                    />
                            </svg>
                    </td>
                    <td>{{code.description}}</td>
                </tr>
                <tr ng-show="results.chosenVariable==results.environmental_variables[0]">
                    <td>
                        <svg height="50" width="400" class="envLegend">
                            <rect class="envVar" height="30" width="300" x="20" />
                            <text x="0" y="45">{{results.environmental_variables[0].min}} {{results.environmental_variables[0].units}}</text>
                            <text x="300" y="45">{{results.environmental_variables[0].max}} {{results.environmental_variables[0].units}}</text>
                      </svg>
                    </td>
                </tr>
                <tr ng-show="results.chosenVariable.data_type == 'CONTINUOUS'">
                    <td width="20">
                        <svg height="20" width="20">
                            <circle
                                    cx="10"
                                    cy="13"
                                    r="4.5"
                                    fill="hsl(360, 100%, 100%)"
                                    stroke="#000"
                                    stroke-width="0.5"
                                    />
                            </svg>
                        </td>
                    <td>Missing Data</td>
               </tr>
                <tr ng-show="results.chosenVariable.data_type == 'CONTINUOUS'">
                    <td colspan="2">
                        <svg class="bf-cont-gradient" width="400" height="50">
                            <defs>
                                <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:hsl(0, 65%, 95%);stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:hsl(0, 65%, 50%);stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:hsl(0, 65%, 22%);stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <rect x="10" fill="url(#grad1)" height="30" width="300" />
                            <text x="0" y="45">{{results.code_ids[results.chosenVariable.id].min}} {{results.code_ids[results.chosenVariable.id].units}}</text>
                            <text x="300" y="45">{{results.code_ids[results.chosenVariable.id].max}} {{results.code_ids[results.chosenVariable.id].units}}</text>
                        </svg>
                    </td>
                </tr>
                <tr ng-repeat="code in results.classifications|joinDictItems">
                    <td>
                        <svg height="20" width="20">
                            <circle
                                    cx="10"
                                    cy="10"
                                    r="4.5"
                                    fill="{{code.id|colorNode:(results.classifications|joinDictItems)}}"
                                    stroke="#000"
                                    stroke-width="0.5"
                                    />
                            </svg>
                    </td>
                    <td>{{code.name}}</td>
                </tr>
            </table>
            <svg class="legend-for-download" style="visibility:hidden;">
            </svg>